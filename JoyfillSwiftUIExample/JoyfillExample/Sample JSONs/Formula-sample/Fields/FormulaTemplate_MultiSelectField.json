{
  "_id": "6850502a3339c0544b50778e",
  "identifier": "doc_6850502a3339c0544b50778e",
  "name": "Multi Select Field Formula Template",
  "files": [
    {
      "_id": "6850502ad5b54e6d8570fbbf",
      "name": "New File",
      "pageOrder": [
        "6850502aef6b6d67d4597e93"
      ],
      "pages": [
        {
          "_id": "6850502aef6b6d67d4597e93",
          "name": "New Page",
          "width": 816,
          "height": 1056,
          "rowHeight": 8,
          "cols": 8,
          "fieldPositions": [
            {
              "_id": "685209fb4c33a728f921e80e",
              "type": "multiSelect",
              "field": "multiSelect1",
              "displayType": "original",
              "targetValue": "684c3fedd15ffca87e7cd3d6",
              "x": 2,
              "y": 0,
              "width": 4,
              "height": 15
            },
            {
              "_id": "pos_text1",
              "type": "text",
              "field": "text1",
              "displayType": "original",
              "x": 0,
              "y": 8,
              "width": 8,
              "height": 8
            },
            {
              "_id": "pos_text2",
              "type": "text",
              "field": "text2",
              "displayType": "original",
              "x": 0,
              "y": 16,
              "width": 8,
              "height": 8
            },
            {
              "_id": "pos_number1",
              "type": "text",
              "field": "number1",
              "displayType": "original",
              "x": 0,
              "y": 24,
              "width": 8,
              "height": 8
            },
            {
              "_id": "pos_text3",
              "type": "text",
              "field": "text3",
              "displayType": "original",
              "x": 0,
              "y": 32,
              "width": 8,
              "height": 8
            }
          ],
          "layout": "grid",
          "presentation": "normal",
          "padding": 24
        }
      ],
      "styles": {
        "margin": 4
      }
    }
  ],
  "fields": [
    {
      "file": "6850502ad5b54e6d8570fbbf",
      "_id": "multiSelect1",
      "type": "multiSelect",
      "title": "Multiple Choice",
      "multi": true,
      "options": [
        {
          "_id": "684c3fedd15ffca87e7cd3d6",
          "value": "Option 1",
          "deleted": false
        },
        {
          "_id": "684c3fed4cb4f71457c74a94",
          "value": "Option 2",
          "deleted": false
        },
        {
          "_id": "684c3fed07eb12c9a731e05e",
          "value": "Option 3",
          "deleted": false
        }
      ],
      "identifier": "field_685209fbb4e19cefdac8409b",
      "value": [
        "684c3fed4cb4f71457c74a94",
        "684c3fedd15ffca87e7cd3d6"
      ]
    },
    {
      "file": "6850502ad5b54e6d8570fbbf",
      "_id": "text1",
      "type": "text",
      "title": "Display 'true' if any value selected",
      "identifier": "field_multi_001",
      "formulas": [
        {
          "_id": "F001",
          "key": "value",
          "formula": "multiSelectNotEmpty"
        }
      ]
    },
    {
      "file": "6850502ad5b54e6d8570fbbf",
      "_id": "text2",
      "type": "text",
      "title": "Concatenated selected options",
      "identifier": "field_multi_002",
      "formulas": [
        {
          "_id": "F002",
          "key": "value",
          "formula": "multiSelectConcat"
        }
      ]
    },
    {
      "file": "6850502ad5b54e6d8570fbbf",
      "_id": "number1",
      "type": "text",
      "title": "Selected option numbers",
      "identifier": "field_multi_003",
      "formulas": [
        {
          "_id": "F003",
          "key": "value",
          "formula": "multiSelectToNumbers"
        }
      ]
    },
    {
      "file": "6850502ad5b54e6d8570fbbf",
      "_id": "text3",
      "type": "text",
      "title": "Approved if Option 2 selected, else Pending",
      "identifier": "field_multi_004",
      "formulas": [
        {
          "_id": "F004",
          "key": "value",
          "formula": "multiSelectApprovedPending"
        }
      ]
    }
  ],
  "type": "document",
  "formulas": [
    {
      "_id": "multiSelectNotEmpty",
      "desc": "Check if multiSelect1 has any value",
      "type": "calc",
      "scope": "private",
      "expression": "not(empty(multiSelect1))"
    },
    {
      "_id": "multiSelectConcat",
      "desc": "Label + joined selected values from multiSelect1",
      "type": "calc",
      "scope": "private",
      "expression": "concat(\"Selected: \", reduce(multiSelect1, (acc, item) -> if(empty(acc), item, concat(acc, \", \", item)), \"\"))"
    },
    {
      "_id": "multiSelectToNumbers",
      "desc": "Map selected options in multiSelect1 to numeric values",
      "type": "calc",
      "scope": "private",
      "expression": "sum(map(multiSelect1, (item) -> if(item == \"Option 1\", 1, if(item == \"Option 2\", 2, if(item == \"Option 3\", 3, 0)))))"
    },
    {
      "_id": "multiSelectApprovedPending",
      "desc": "If Option 2 is selected \u2192 Approved, else Pending",
      "type": "calc",
      "scope": "private",
      "expression": "if(some(multiSelect1, (item) -> item == \"Option 2\"), \"Approved\", \"Pending\")"
    }
  ]
}