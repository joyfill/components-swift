{
  "formulas": [
    {
      "_id": "formula_fieldA_implicit_1",
      "desc": "fieldA = sum([fieldB, fieldC])",
      "type": "calc",
      "scope": "private",
      "expression": "sum([fieldB1, fieldC1])"
    },
    {
      "_id": "formula_fieldC_implicit_1",
      "desc": "fieldC = fieldA * 2",
      "type": "calc",
      "scope": "private",
      "expression": "fieldA1 * 2"
    },
    {
      "_id": "formula_fieldA_implicit_2",
      "desc": "fieldA = sum(map([{ value: fieldB }, { value: fieldC }], (arg) -> arg.value))",
      "type": "calc",
      "scope": "private",
      "expression": "sum(map([{ value: fieldB2 }, { value: fieldC2 }], (arg) -> arg.value))"
    },
    {
      "_id": "formula_fieldC_implicit_2",
      "desc": "fieldC = fieldA * 2",
      "type": "calc",
      "scope": "private",
      "expression": "fieldA2 * 2"
    },
    {
      "_id": "formula_fieldA_working_1",
      "desc": "Working: sum([10, 20])",
      "type": "calc",
      "scope": "private",
      "expression": "sum([10, 20])"
    },
    {
      "_id": "formula_fieldC_working_1",
      "desc": "Working: fieldC = fieldA * 2",
      "type": "calc",
      "scope": "private",
      "expression": "fieldA_working_1 * 2"
    },
    {
      "_id": "formula_fieldA_working_2",
      "desc": "Working: sum(map([{ value: 10 }, { value: 20 }], (arg) -> arg.value))",
      "type": "calc",
      "scope": "private",
      "expression": "sum(map([{ value: 10 }, { value: 20 }], (arg) -> arg.value))"
    },
    {
      "_id": "formula_fieldC_working_2",
      "desc": "Working: fieldC = fieldA * 2",
      "type": "calc",
      "scope": "private",
      "expression": "fieldA_working_2 * 2"
    }
  ],
  "fields": [
    {
      "_id": "fieldA1",
      "type": "number",
      "title": "Implicit Ref A1 (sum)",
      "identifier": "fieldA1",
      "formulas": [
        {
          "_id": "AF_fieldA_implicit_1",
          "formula": "formula_fieldA_implicit_1",
          "key": "value"
        }
      ],
      "file": "file1"
    },
    {
      "_id": "fieldB1",
      "type": "number",
      "title": "Helper B1",
      "identifier": "fieldB1",
      "file": "file1"
    },
    {
      "_id": "fieldC1",
      "type": "number",
      "title": "Implicit Ref C1 (sum)",
      "identifier": "fieldC1",
      "formulas": [
        {
          "_id": "AF_fieldC_implicit_1",
          "formula": "formula_fieldC_implicit_1",
          "key": "value"
        }
      ],
      "file": "file1"
    },
    {
      "_id": "fieldA2",
      "type": "number",
      "title": "Implicit Ref A2 (map)",
      "identifier": "fieldA2",
      "formulas": [
        {
          "_id": "AF_fieldA_implicit_2",
          "formula": "formula_fieldA_implicit_2",
          "key": "value"
        }
      ],
      "file": "file1"
    },
    {
      "_id": "fieldB2",
      "type": "number",
      "title": "Helper B2",
      "identifier": "fieldB2",
      "file": "file1"
    },
    {
      "_id": "fieldC2",
      "type": "number",
      "title": "Implicit Ref C2 (map)",
      "identifier": "fieldC2",
      "formulas": [
        {
          "_id": "AF_fieldC_implicit_2",
          "formula": "formula_fieldC_implicit_2",
          "key": "value"
        }
      ],
      "file": "file1"
    },
    {
      "_id": "fieldA_working_1",
      "file": "file1",
      "type": "number",
      "title": "Working A1 (sum of constants)",
      "identifier": "fieldA_working_1",
      "formulas": [
        {
          "_id": "AF_fieldA_working_1",
          "formula": "formula_fieldA_working_1",
          "key": "value"
        }
      ]
    },
    {
      "_id": "fieldC_working_1",
      "file": "file1",
      "type": "number",
      "title": "Working C1 (depends on A1)",
      "identifier": "fieldC_working_1",
      "formulas": [
        {
          "_id": "AF_fieldC_working_1",
          "formula": "formula_fieldC_working_1",
          "key": "value"
        }
      ]
    },
    {
      "_id": "fieldA_working_2",
      "file": "file1",
      "type": "number",
      "title": "Working A2 (map of constants)",
      "identifier": "fieldA_working_2",
      "formulas": [
        {
          "_id": "AF_fieldA_working_2",
          "formula": "formula_fieldA_working_2",
          "key": "value"
        }
      ]
    },
    {
      "_id": "fieldC_working_2",
      "file": "file1",
      "type": "number",
      "title": "Working C2 (depends on A2)",
      "identifier": "fieldC_working_2",
      "formulas": [
        {
          "_id": "AF_fieldC_working_2",
          "formula": "formula_fieldC_working_2",
          "key": "value"
        }
      ]
    }
  ],
  "files": [
    {
      "_id": "file1",
      "name": "Implicit Ref File",
      "pageOrder": [
        "page1"
      ],
      "pages": [
        {
          "_id": "page1",
          "name": "Implicit Ref Page",
          "width": 816,
          "height": 1056,
          "rowHeight": 8,
          "cols": 8,
          "padding": 24,
          "layout": "grid",
          "presentation": "normal",
          "fieldPositions": [
            {
              "_id": "fp_fieldA1",
              "field": "fieldA1",
              "type": "number",
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldB1",
              "field": "fieldB1",
              "type": "number",
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldC1",
              "field": "fieldC1",
              "type": "number",
              "x": 0,
              "y": 8,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldA2",
              "field": "fieldA2",
              "type": "number",
              "x": 0,
              "y": 16,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldB2",
              "field": "fieldB2",
              "type": "number",
              "x": 4,
              "y": 16,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldC2",
              "field": "fieldC2",
              "type": "number",
              "x": 0,
              "y": 24,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldA_working_1",
              "field": "fieldA_working_1",
              "type": "number",
              "x": 0,
              "y": 32,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldC_working_1",
              "field": "fieldC_working_1",
              "type": "number",
              "x": 4,
              "y": 32,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldA_working_2",
              "field": "fieldA_working_2",
              "type": "number",
              "x": 0,
              "y": 40,
              "width": 4,
              "height": 8,
              "displayType": "original"
            },
            {
              "_id": "fp_fieldC_working_2",
              "field": "fieldC_working_2",
              "type": "number",
              "x": 4,
              "y": 40,
              "width": 4,
              "height": 8,
              "displayType": "original"
            }
          ]
        }
      ],
      "styles": {
        "margin": 4
      },
      "views": []
    }
  ],
  "type": "document",
  "v": "1",
  "createdOn": 31232313,
  "deleted": false,
  "_id": "685750eff3216b45ffe73c80",
  "identifier": "doc_685750eff3216b45ffe73c80",
  "name": "New Doc"
}
